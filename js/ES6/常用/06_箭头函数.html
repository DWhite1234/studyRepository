<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>06_箭头函数</title>

</head>
<body>
    <button id="btn1">测试箭头函数this_1</button>
    <button id="btn2">测试箭头函数this_2</button>


<!--
* 作用: 定义匿名函数
* 基本语法:
  * 没有参数: () => console.log('xxxx')
  * 一个参数: i => i+2
  * 大于一个参数: (i,j) => i+j
  * 函数体不用大括号: 默认返回结果
  * 函数体如果有多个语句, 需要用{}包围，若有需要返回的内容，需要手动返回
* 使用场景: 多用来定义回调函数

* 箭头函数的特点：
    1、简洁
    2、箭头函数没有自己的this，箭头函数的this不是调用的时候决定的，而是在定义的时候处在的上下文对象就是它的this
    3、扩展理解： 箭头函数的this看外层的是否有函数，
        如果有，外层函数的this就是内部箭头函数的this，
        如果没有，则this是window。
-->
<script type="text/javascript">
  
  // 常规函数
  console.log('------------- 常规函数  -----------------');
  // let fun2 =function () {
  //   console.log('fun2()');
  // }
  // fun2();

  console.log('------------- 箭头函数 - 没有形参  -----------------');
  // 当箭头函数没有形参的时候 () 不能省略
  let fun = () => console.log('fun()');
  fun();

  console.log('------------- 箭头函数 - 有一个形参  -----------------');
  // 当箭头函数只有一个形参的时候，() 可以省略，也可以不省略
  let fun1 = a => console.log('只有一个形参的时候', a);
  fun1(123);

  console.log('------------- 箭头函数 - 有多个形参  -----------------');
  // 当箭头函数有多个形参的时候， ()不能省略
  let fun2 = (a, b) => console.log('有多个形参的时候', a, b);
  fun2(1,2);


  console.log('------------- 箭头函数 - 函数体只有一条语句的时候  -----------------');
  // 当箭头函数的函数体只有一条语句的时候{}可以省略， 当{}省略的时候会自动 return 当前语句或者表达式的结果, 当{}不省略的时候，需要手动指定返回的结果, 否则默认执行 return value: undefined;
  let fun3 = () => console.log('函数体只有一条语句的时候'); // 语句的返回结果
  console.log(fun3());
  // let fun3 = () => 123 // 语句的返回结果
  // console.log(fun3());

  console.log('------------- 箭头函数 - 函数体有多条语句的时候  -----------------');
  // 当箭头函数的函数体有多条语句的时候，{}不能省略， 当{}不省略的时候，需要手动指定返回的结果， 否则默认执行 return value: undefined;
  let fun4 = () => {
    let a = 1;
    console.log('函数体有多条语句的时候', a);
    // return a;
  }
  
  console.log(fun4());




  console.log('------------------console.log() -----------------');

  // console.log('abc');
  console.log(console.log('abc'));

  // alert(alert('abc'));

  console.log('----------------- 箭头函数的特点： this指向问题 -----------------');
  let btn1 = document.getElementById('btn1');
  let btn2 = document.getElementById('btn2');

  // 箭头函数的this看外层的是否有函数，
  // 如果有，外层函数的this就是内部箭头函数的this，
  // 如果没有，则this是window。
  btn1.onclick = function () {
    console.log(this); // btn1对象
  }

  // btn2.onclick = () => console.log(this); // window


  // let obj = {
  //   username: 'kobe',
  //   test: function () { // this ---> obj
  //     btn2.onclick = () => console.log(this); // obj
  //   }
  // }

  let obj = {
    username: 'kobe',
    test:  () => {
      btn2.onclick = () => console.log(this); // window
    }
  }

  obj.test();

  let Person = () => this.name = 'kobe';
  let person1 = new Person();



</script>

</body>
</html>